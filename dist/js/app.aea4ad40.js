(function(){var e={9071:function(e,t,n){"use strict";var i=n(9242),a=n(3396),s=n(7139);const l=(0,a._)("h1",null,"Verus",-1),r=(0,a.Uk)(" Switch Views "),o=(0,a._)("br",null,null,-1),u={class:"buttons"},d={key:2},p={key:3};function c(e,t,n,i,c,m){const h=(0,a.up)("CreatePatients"),f=(0,a.up)("CreateAppointments");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a._)("h5",null,[r,o,(0,a._)("div",u,[(0,a._)("button",{onClick:t[0]||(t[0]=e=>m.switchMode(1))},"New Patient"),(0,a._)("button",{onClick:t[1]||(t[1]=e=>m.switchMode(2))},"New Appointment")])]),1==this.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,msg:"AHHHHH",onSubmitPatient:m.submitPatient},null,8,["onSubmitPatient"])):(0,a.kq)("",!0),2==this.mode?((0,a.wg)(),(0,a.j4)(f,{key:1,onSubmitAppointment:m.verifyId},null,8,["onSubmitAppointment"])):(0,a.kq)("",!0),1==this.mode?((0,a.wg)(),(0,a.iD)("ul",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.patients,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a._)("p",null,(0,s.zw)(e.name)+" - "+(0,s.zw)(e.id)+" - "+(0,s.zw)(e.birthday.toDateString()),1)])))),128))])):(0,a.kq)("",!0),2==this.mode?((0,a.wg)(),(0,a.iD)("ul",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.appointments,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a._)("p",null,(0,s.zw)(e.id)+" - "+(0,s.zw)(e.date.toDateString())+" - "+(0,s.zw)(e.diagnosis)+" - "+(0,s.zw)(m.displayCodes(e.code))+" - "+(0,s.zw)(e.patientType)+" - "+(0,s.zw)(e.refStatus),1)])))),128))])):(0,a.kq)("",!0)],64)}const m={class:"center"},h=(0,a._)("th",null,[(0,a._)("p",null,"Patient ID number:")],-1),f={ref:"id",name:"id",type:"number"},g=(0,a._)("th",null,[(0,a._)("p",null,"Patient name:")],-1),y={ref:"name",name:"name",type:"text"},_=(0,a._)("th",null,[(0,a._)("p",null,"Date of Birth: ")],-1),b={ref:"birthday",name:"birthday",type:"date"},w=(0,a._)("th",null,[(0,a._)("p",null,"Chronic Disease:")],-1),v=(0,a._)("option",{value:"Diabetes"},"Diabetes",-1),C=(0,a._)("option",{value:"Cancer"},"Cancer",-1),T=(0,a._)("option",{value:"Schizophrenia"},"Schizophrenia",-1),D=(0,a._)("option",{value:""},"None",-1),k=[v,C,T,D];function S(e,t,n,s,l,r){return(0,a.wg)(),(0,a.iD)("table",m,[(0,a._)("tr",null,[h,(0,a._)("th",null,[(0,a._)("input",f,null,512)])]),(0,a._)("tr",null,[g,(0,a._)("th",null,[(0,a._)("input",y,null,512)])]),(0,a._)("tr",null,[_,(0,a._)("th",null,[(0,a._)("input",b,null,512)])]),(0,a._)("tr",null,[w,(0,a._)("th",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.diseaseAssessment=e)},k,512),[[i.bM,l.diseaseAssessment]])])]),(0,a._)("tr",null,[(0,a._)("button",{onClick:t[1]||(t[1]=(...e)=>r.handleClick&&r.handleClick(...e))},"Submit")])])}var A={data(){return{diseaseAssessment:""}},methods:{handleClick(){this.$emit("submitPatient",{name:this.$refs.name.value,id:this.$refs.id.value,birthday:new Date(this.$refs.birthday.value),chronicDisease:this.diseaseAssessment})}}},P=n(89);const V=(0,P.Z)(A,[["render",S]]);var $=V;const M={class:"center"},U=(0,a._)("th",null,[(0,a._)("p",null,"Patient ID number:")],-1),z={value:"2112",ref:"id",name:"id",type:"number"},F=(0,a._)("th",null,[(0,a._)("p",null,"Date of Appointment: ")],-1),H={ref:"appointmentDate",name:"appointmentDate",type:"date"},O=(0,a._)("th",null,[(0,a._)("p",null,"Diagnosis: ")],-1),x={value:"Cancer",ref:"diagnosis",name:"diagnosis",type:"text"},j=(0,a._)("th",null,[(0,a._)("p",null,"Appointment Type : ")],-1),B=(0,a._)("option",{value:"Consultation"},"Consultation",-1),K=(0,a._)("option",{value:"Follow Up"},"Follow Up",-1),q=(0,a._)("option",{value:"Counselling"},"Counselling",-1),I=[B,K,q],N=(0,a._)("th",null,[(0,a._)("p",null,"What time did the appointment end? ")],-1),Y=(0,a._)("th",null,[(0,a._)("p",null,"Patient is : ")],-1),R={name:"patientType",id:"patientType",ref:"patientType"},Z=(0,a._)("option",{value:"regular"},"Regular",-1),E=(0,a._)("option",{value:"inpatient"},"Inpatient",-1),L=(0,a._)("option",{value:"ed"},"ED Patient",-1),W=(0,a._)("option",{value:"unscheduled"},"Unscheduled",-1),G=[Z,E,L,W],J={key:0},Q=(0,a._)("th",null,[(0,a._)("p",null,"Has patient had referall and care? ")],-1),X={value:"No",name:"referall",id:"referall",ref:"referall"},ee=(0,a._)("option",{value:"Yes"},"Yes",-1),te=(0,a._)("option",{value:"No"},"No",-1),ne=[ee,te],ie={key:1},ae=(0,a._)("th",null,[(0,a._)("p",null,"Assessed for hospital admission :")],-1);function se(e,t,n,s,l,r){return(0,a.wg)(),(0,a.iD)("table",M,[(0,a._)("tr",null,[U,(0,a._)("th",null,[(0,a._)("input",z,null,512)])]),(0,a._)("tr",null,[F,(0,a._)("th",null,[(0,a._)("input",H,null,512)])]),(0,a._)("tr",null,[O,(0,a._)("th",null,[(0,a._)("input",x,null,512)])]),(0,a._)("tr",null,[j,(0,a._)("th",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.formType=e),name:"appointmentType",id:"appointmentType",ref:"appointmentType"},I,512),[[i.bM,l.formType]])])]),(0,a._)("tr",null,[N,(0,a._)("th",null,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.time=e),type:"time"},null,512),[[i.nr,l.time]])])]),(0,a._)("tr",null,[Y,(0,a._)("th",null,[(0,a._)("select",R,G,512)])]),"Consultation"==l.formType?((0,a.wg)(),(0,a.iD)("tr",J,[Q,(0,a._)("th",null,[(0,a._)("select",X,ne,512)])])):(0,a.kq)("",!0),"Follow Up"==l.formType?((0,a.wg)(),(0,a.iD)("tr",ie,[ae,(0,a._)("th",null,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.assessed=e),type:"checkbox",ref:"admissionAssessed"},null,512),[[i.e8,l.assessed]])])])):(0,a.kq)("",!0),(0,a._)("button",{onClick:t[3]||(t[3]=(...e)=>r.submitApt&&r.submitApt(...e))},"Submit Appointment")])}var le={name:"CreateAppointments",data(){return{formType:"Consultation",assessed:!1,asmtType:"",time:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).substring(0,5)}},methods:{submitApt(){let e,t=new Date(this.$refs.appointmentDate.value);if(new Date(this.$refs.appointmentDate.value).getTime()||(t=new Date(2022,5,30)),"Consultation"==this.formType)e={id:this.$refs.id.value,date:t,diagnosis:this.$refs.diagnosis.value,patientType:this.$refs.patientType.value,refStatus:this.$refs.referall.value,aptType:this.$refs.appointmentType.value,endTime:this.time};else if("Follow Up"==this.formType)e={id:this.$refs.id.value,date:t,diagnosis:this.$refs.diagnosis.value,assessedAdmission:this.assessed,patientType:this.$refs.patientType.value,aptType:"Follow Up",endTime:this.time};else{if("Counselling"!=this.formType)return void alert("In order to bill a code, you must select an appointment type.");e={id:this.$refs.id.value,date:t,diagnosis:this.$refs.diagnosis.value,assessedAdmission:this.assessed,aptType:this.$refs.appointmentType.value,endTime:this.time}}this.$emit("submitAppointment",e)}}};const re=(0,P.Z)(le,[["render",se]]);var oe=re,ue=n(8146);let de=[{name:"Consultation",code:"345",price:152.4,category:"Consultation",isValid({apt:e,appointments:t}){let n=t.filter((function(e){for(let t=0;t<e.code.length;t++){if("345"==e.code[t].toString().substring(1))return!0;console.log(e.code[t].toString().substring(1),"the code")}}));for(let i=0;i<n.length;i++)if(e.diagnosis!=n[i].diagnosis||"inpatient"==e.aptType||"ed"==e.aptType){if(ue.daysBetween(e.date,n[i].date)<365)return!1}else if(ue.daysBetween(e.date,n[i].date)<730)return!1;return!0}},{name:"Limited Consultation",code:"745",price:99.3,category:"Consultation",isValid({apt:e}){return"Yes"==e.refStatus}}],pe=[{name:"Counselling",price:100,code:"K013",isValid({appointments:e}){return console.log(e.filter((e=>"K013"==e.code.toString()))),e.filter((e=>"K013"==e.code.toString())).length<=2}}],ce=[{name:"Medical Specific Assessment",code:"343",price:"77.55",isValid({apt:e,appointments:t}){let n=t.filter((function(t){return t.id==e.id&&"343"==t.code.toString().substring(1)})),i=0;for(let a=0;a<n.length;a++)if(Math.abs(ue.daysBetween(e.date,n[a].date))<=365&&n[a].diagnosis==e.diagnosis){if(!(ue.daysBetween(e.date,n[a].date)>=90&&e.assessedAdmission))return!1;if(i>=1)return!1;i+=1}else if(Math.abs(ue.daysBetween(e.date,n[a].date)<=365)&&n[a].diagnosis!=e.diagnosis){if(i>=1)return!1;i+=1}return!0}},{name:"Complex medical specific re-assessmet",price:68.9,code:"341",isValid({appointments:e}){return e.filter((e=>"341"==e.code.toString().substring(1)||"343"==e.code.toString().substring(1))).length<4}},{name:"Medical specific re-assessment",code:"340",price:59.55,isValid({appointments:e}){return e.filter((e=>"340"==e.code.toString().substring(1))).length<2}},{name:"Partial assessment",price:36.25,code:"348",isValid(){return!0}}],me=[{name:"Travel Premium for 17:00-24:00 Monday - Friday",code:"C102",price:36.4,isValid({apt:e}){let t=e.endTime.substring(0,2),n=e.date.getDay();return t>=17&&t<24**n<=5&&n>0}},{name:"Travel Premium for 07:00-24:00 Sat, Sun, & Holidays",code:"C103",price:36.4,isValid(){return!1}},{name:"Travel Premium for 00:00-07:00",code:"C104",price:36.4,isValid(){return!1}},{name:"First Person seen 17:00-24:00 Monday - Friday",code:"C109",price:60,isValid(){return!1}},{name:"First Person seen 07:00-24:00 Sat, Sun, & Holidays",code:"C108",price:75,isValid(){return!1}}];function he(e,t,n){let i=t.filter((t=>t.id==e.id)),a={apt:e,appointments:i,patient:n},s=[],l=[];switch(e.aptType){case"Consultation":l=de;break;case"Follow Up":l=ce;break;case"Counselling":l=pe;break;default:alert("We should not see this");break}let r=fe(l,a);if("K013"==r.code)return[r.code];let o=ue.specialVisitPremiums(r.code,e);s.push(o);let u=fe(me,a);return u.price&&s.push(u.code),s}function fe(e,t){let n={code:"000",price:0};for(let i=0;i<e.length;i++)e[i].isValid(t)&&e[i].price>n.price&&(n=e[i]);return n}var ge={name:"App",components:{CreatePatients:$,CreateAppointments:oe},data(){return{patients:[{name:"Adam Clarke",id:1234,birthday:new Date(2003,1,5)},{name:"Summer Clarke",id:2382,birthday:new Date(2005,5,27)},{name:"Steven Clarke",id:2112,birthday:new Date(1968,1,30)},{name:"Melanie Clarke",id:1152,birthday:new Date(1972,8,15)},{name:"George Kris",id:1010,birthday:new Date(1930,5,5)},{name:"Alex",id:1999,birthday:new Date(2005,3,5),chronicDisease:"Schizophrenia"}],appointments:[{id:1152,date:new Date(2020,3,20),diagnosis:"Sleep Apnea",code:["C345"],patientType:"Regular"},{id:1010,date:new Date(2021,2,5),diagnosis:"Diabetes",code:["A345"],patientType:"Regular"},{id:1010,date:new Date(2021,3,5),diagnosis:"Cancer",code:["C345"],patientType:"Regular"}],mode:2}},methods:{switchMode(e){this.mode=e},verifyId(e){let t=this.patients.filter((t=>t.id==e.id))[0];if(!t)return void alert("Patient not found, double check CR number.");let n=he(e,this.appointments,t);this.appointments.push({id:e.id,date:e.date,diagnosis:e.diagnosis,code:n})},displayCodes(e){let t="";for(let n=0;n<e.length;n++)t+=e[n]+", ";return t},submitPatient(e){this.patients.push(e)}}};const ye=(0,P.Z)(ge,[["render",c]]);var _e=ye;(0,i.ri)(_e).mount("#app")},8146:function(e){function t(e,t){return t.getTime()-e.getTime()}function n(e,t){return Math.abs(t.getTime()-e.getTime())/864e5}function i(e){return"C340"==e||"C341"==e||"C343"==e}function a(e,t){switch(t.patientType){case"inpatient":e="C"+e;break;case"unscheduled":e="U"+e;break;case"ed":e="K"+e;break;case"regular":e="A"+e;break}return e}e.exports={distanceBetweenDates:t,daysBetween:n,chronicDiseaseValidity:i,specialVisitPremiums:a}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,s){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],s=e[d][2];for(var r=!0,o=0;o<i.length;o++)(!1&s||l>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[o])}))?i.splice(o--,1):(r=!1,s<l&&(l=s));if(r){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[i,a,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,l=i[0],r=i[1],o=i[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(o)var d=o(n)}for(t&&t(i);u<l.length;u++)s=l[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},i=self["webpackChunkv1"]=self["webpackChunkv1"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(9071)}));i=n.O(i)})();
//# sourceMappingURL=app.aea4ad40.js.map